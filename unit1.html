<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <title>台灣地理闖關遊戲 - 拖曳題目</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background-image: url("img/ans.png");
            background-size: cover;
        }

        .question-card {
            background-color: #fff;
            padding: 30px;
            margin: 50px auto;
            border-radius: 15px;
            max-width: 900px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        h2 {
            margin-top: 0;
        }

        .choices button {
            display: block;
            margin: 10px 0;
            padding: 15px 30px;
            font-size: 20px;
            border-radius: 10px;
            border: none;
            background-color: #f5eddc;
            cursor: pointer;
            transition: all 0.2s;
        }

        .choices button:hover {
            background-color: #e6dcc6;
            transform: scale(1.05);
        }

        /* 拖曳題 */
        .drag-container,
        .drop-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
        }

        .draggable {
            padding: 10px 20px;
            background-color: #f5eddc;
            border-radius: 8px;
            cursor: grab;
            user-select: none;
        }

        .drop-zone {
            width: 120px;
            height: 50px;
            border: 2px dashed #ccc;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .hidden {
            display: none;
        }
    </style>
</head>

<body>

    <div id="question-container" class="question-card">
        <h2 id="question-number">問題 1 / 10</h2>
        <p id="question-text">台灣東部外海是？</p>

        <div id="choices" class="choices"></div>

        <!-- 拖曳題容器 -->
        <div id="drag-question" class="hidden">
            <div class="drag-container" id="drag-items"></div>
            <div class="drop-container" id="drop-zones"></div>
        </div>
    </div>

    <script>
        const questions = [
            { type: 'choice', text: '台灣東部外海是？', options: ['A. 台灣海峽', 'B. 巴士海峽', 'C. 太平洋', 'D. 三峽'], answer: 'C' },
            { type: 'choice', text: '離金門最近的國家是以下哪一個？', options: ['A. 日本', 'B. 中國', 'C. 韓國', 'D. 美國'], answer: 'B' },
            { type: 'choice', text: '位於台灣與中國之間的海峽叫什麼？', options: ['A. 台灣海峽', 'B. 麻六甲海峽', 'C. 巴士海峽', 'D. 東海'], answer: 'A' },
            { type: 'choice', text: '南海中的太平島目前由哪一個國家實際控制？', options: ['A. 越南', 'B. 菲律賓', 'C. 馬來西亞', 'D. 台灣'], answer: 'D' },
            { type: 'choice', text: '下列哪個國家與台灣沒有直接重疊的專屬經濟海域主權爭議？', options: ['A. 韓國', 'B. 日本', 'C. 中國', 'D. 菲律賓'], answer: 'A' },
            { type: 'choice', text: '從高雄搭船往南，最可能先抵達哪個國家', options: ['A. 印尼', 'B. 泰國', 'C. 菲律賓', 'D. 緬甸'], answer: 'C' },
            { type: 'choice', text: '台灣北方最近的鄰國為？', options: ['A. 日本', 'B. 俄羅斯', 'C. 北韓', 'D. 加拿大'], answer: 'A' },
            { type: 'choice', text: '所謂「第一島鏈」中，台灣位於哪兩國之間？', options: ['A. 中國、日本', 'B. 日本、菲律賓', 'C. 日本、韓國', 'D. 中國、韓國'], answer: 'B' },
            { type: 'choice', text: '貨船從高雄港出發前往新加坡，必經哪個海域與海峽？', options: ['A. 東海、台灣海峽', 'B. 太平洋、巴士海峽', 'C. 南海、巴士海峽', 'D. 南海、麻六甲海峽'], answer: 'D' },
            // 拖曳題示例
            {
                type: 'drag',
                text: '將台灣周遭海域名稱拖曳到正確的位置：',
                dragItems: ['巴士海峽', '台灣海峽', '東海'],
                dropZones: ['北', '南', '西'],
                answers: { '東海': '北', '巴士海峽': '南', '台灣海峽': '西' }
            }
        ];

        let currentQuestion = 0;

        function loadQuestion() {
            const q = questions[currentQuestion];
            document.getElementById('question-number').innerText = `問題 ${currentQuestion + 1} / ${questions.length}`;
            document.getElementById('question-text').innerText = q.text;

            const choicesDiv = document.getElementById('choices');
            const dragDiv = document.getElementById('drag-question');

            if (q.type === 'choice') {
                dragDiv.classList.add('hidden');
                choicesDiv.classList.remove('hidden');
                choicesDiv.innerHTML = '';
                q.options.forEach(option => {
                    const btn = document.createElement('button');
                    btn.innerText = option;
                    btn.onclick = () => checkChoice(option.charAt(0));
                    btn.className = 'choice-btn';
                    choicesDiv.appendChild(btn);
                });
            } else if (q.type === 'drag') {
                choicesDiv.classList.add('hidden');
                dragDiv.classList.remove('hidden');
                const dragContainer = document.getElementById('drag-items');
                const dropContainer = document.getElementById('drop-zones');
                dragContainer.innerHTML = '';
                dropContainer.innerHTML = '';

                // 建立拖曳項目
                q.dragItems.forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'draggable';
                    div.draggable = true;
                    div.id = 'drag-' + item;
                    div.innerText = item;
                    div.addEventListener('dragstart', dragStart);
                    dragContainer.appendChild(div);
                });

                // 建立放置區
                q.dropZones.forEach(zone => {
                    const div = document.createElement('div');
                    div.className = 'drop-zone';
                    div.id = 'drop-' + zone;
                    div.addEventListener('dragover', dragOver);
                    div.addEventListener('drop', drop);
                    div.innerText = zone;
                    dropContainer.appendChild(div);
                });
            }
        }

        // ===== 拖曳事件 =====
        let draggedItem = null;

        function dragStart(e) {
            draggedItem = e.target.id;
        }

        function dragOver(e) {
            e.preventDefault();
        }

        function drop(e) {
            e.preventDefault();
            const dropId = e.target.id;
            const itemName = draggedItem.replace('drag-', '');
            const dropZoneName = dropId.replace('drop-', '');
            const q = questions[currentQuestion];
            if (q.answers[itemName] === dropZoneName) {
                e.target.innerText = itemName;
                document.getElementById(draggedItem).style.display = 'none';
                // 檢查是否所有項目都放對
                let allDone = q.dragItems.every(it => {
                    const dz = q.answers[it];
                    return document.getElementById('drop-' + dz).innerText === it;
                });
                if (allDone) {
                    alert('答對了！進入下一題');
                    nextQuestion();
                }
            } else {
                alert('答錯了，請再試一次！');
            }
        }

        // ===== 選擇題檢查 =====
        function checkChoice(ans) {
            if (ans === questions[currentQuestion].answer) {
                alert('答對了！');
                nextQuestion();
            } else {
                alert('答錯了，請再試一次！');
            }
        }

        function nextQuestion() {
            currentQuestion++;
            if (currentQuestion < questions.length) {
                loadQuestion();
            } else {
                alert('恭喜完成所有題目！');
            }
        }

        // 初始載入
        loadQuestion();

    </script>
</body>

</html>